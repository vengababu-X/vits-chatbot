<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PBR VITS Assistant</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #003366, #0055aa);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

#chat {
    width:400px;
    height:600px;
    background:white;
    border-radius:20px;
    box-shadow:0 20px 50px rgba(0,0,0,0.3);
    display:flex;
    flex-direction:column;
    overflow:hidden;
}

#header {
    background: linear-gradient(135deg, #003366, #004c99);
    color:white;
    padding:20px;
    text-align:center;
}

#header h2 {
    margin:0;
    font-size:18px;
}

#header p {
    margin:5px 0 0;
    font-size:12px;
    opacity:0.8;
}

#messages {
    flex:1;
    padding:15px;
    overflow-y:auto;
    background:#f7f9fc;
    display:flex;
    flex-direction:column;
    gap:10px;
}

.msg {
    padding:10px 14px;
    border-radius:15px;
    max-width:75%;
    font-size:14px;
    line-height:1.4;
    animation:fadeIn 0.3s ease;
}

.user {
    background:#003366;
    color:white;
    align-self:flex-end;
    border-bottom-right-radius:4px;
}

.bot {
    background:#e9ecef;
    color:#333;
    align-self:flex-start;
    border-bottom-left-radius:4px;
}

#inputArea {
    display:flex;
    padding:15px;
    border-top:1px solid #ddd;
    background:white;
}

#input {
    flex:1;
    padding:10px 15px;
    border-radius:25px;
    border:1px solid #ccc;
    outline:none;
    font-size:14px;
}

#input:focus {
    border-color:#003366;
}

button {
    margin-left:10px;
    background:#003366;
    color:white;
    border:none;
    width:45px;
    height:45px;
    border-radius:50%;
    cursor:pointer;
    font-size:16px;
    transition:0.2s;
}

button:hover {
    background:#0055aa;
    transform:scale(1.1);
}

.typing {
    font-style:italic;
    opacity:0.6;
}

@keyframes fadeIn {
    from { opacity:0; transform:translateY(5px); }
    to { opacity:1; transform:translateY(0); }
}
</style>
</head>

<body>

<div id="chat">
<div id="header">
<h2>PBR VITS Assistant</h2>
<p>Kavali Campus Information Bot</p>
</div>

<div id="messages"></div>

<div id="inputArea">
<input type="text" id="input" placeholder="Ask about PBR VITS..." onkeypress="if(event.key==='Enter') send()">
<button onclick="send()">âž¤</button>
</div>
</div>

<script>

let knowledge = [];

fetch("knowledge.json")
.then(res => res.json())
.then(data => knowledge = data);

function addMessage(text, type){
    const div = document.createElement("div");
    div.className = "msg " + type;
    div.textContent = text;
    document.getElementById("messages").appendChild(div);
    document.getElementById("messages").scrollTop = 9999;
}

function showTyping(){
    const div = document.createElement("div");
    div.className = "msg bot typing";
    div.id = "typing";
    div.textContent = "Typing...";
    document.getElementById("messages").appendChild(div);
    document.getElementById("messages").scrollTop = 9999;
}

function removeTyping(){
    const typing = document.getElementById("typing");
    if(typing) typing.remove();
}

function send(){
    const input = document.getElementById("input");
    const userText = input.value.trim().toLowerCase();
    if(!userText) return;

    addMessage(input.value,"user");
    input.value="";

    showTyping();

    setTimeout(() => {

        removeTyping();

        let bestMatch = null;
        let highestScore = 0;

        for(let item of knowledge){
            let score = 0;
            for(let key of item.keywords){
                if(userText.includes(key)){
                    score++;
                }
            }
            if(score > highestScore){
                highestScore = score;
                bestMatch = item.text;
            }
        }

        if(!bestMatch){
            bestMatch = "Sorry, I could not find specific information. Please visit https://pbrvits.ac.in/ for complete details.";
        }

        addMessage(bestMatch,"bot");

    }, 600);
}

addMessage("Hello! I am the PBR VITS Chatbot. How can I help you today?","bot");

</script>

</body>
</html>
