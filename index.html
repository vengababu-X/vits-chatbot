<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PBR VITS Assistant</title>
<style>
body { font-family: Arial; background:#f2f2f2; display:flex; justify-content:center; align-items:center; height:100vh; }
#chat { width:380px; height:550px; background:white; display:flex; flex-direction:column; border-radius:10px; box-shadow:0 5px 20px rgba(0,0,0,0.2); }
#header { background:#003366; color:white; padding:15px; text-align:center; }
#messages { flex:1; padding:10px; overflow-y:auto; }
.msg { margin:8px 0; padding:8px 12px; border-radius:10px; max-width:80%; }
.user { background:#003366; color:white; align-self:flex-end; }
.bot { background:#e0e0e0; }
#inputArea { display:flex; padding:10px; }
#input { flex:1; padding:8px; }
button { padding:8px; background:#003366; color:white; border:none; }
</style>
</head>
<body>

<div id="chat">
<div id="header">PBR VITS Assistant</div>
<div id="messages"></div>
<div id="inputArea">
<input type="text" id="input" placeholder="Ask about PBR VITS...">
<button onclick="send()">Send</button>
</div>
</div>

<script>
let knowledge = [];

fetch("knowledge.json")
.then(res => res.json())
.then(data => knowledge = data);

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.textContent = text;
  document.getElementById("messages").appendChild(div);
  document.getElementById("messages").scrollTop = 9999;
}

function send() {
  const input = document.getElementById("input");
  const question = input.value.toLowerCase();
  if (!question) return;

  addMessage(input.value, "user");
  input.value = "";

  let bestMatch = "No relevant information found.";

  let bestScore = 0;
  knowledge.forEach(item => {
    let score = question.split(" ").reduce((s,w)=> s + (item.text.includes(w)?1:0),0);
    if(score > bestScore){
      bestScore = score;
      bestMatch = item.text.substring(0,800) + "...";
    }
  });

  setTimeout(()=>addMessage(bestMatch,"bot"),400);
}
</script>

</body>
</html>
